window.__require=function e(t,n,o){function a(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var _=n[r]={exports:{}};t[r][0].call(_.exports,function(e){return a(t[r][1][e]||e)},_,_.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({AboutPanel:[function(e,t,n){"use strict";cc._RF.push(t,"578bedx+JBH14Fr2bpsAH95","AboutPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":r.default.getInstance().ClosePanel(this.node);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel")}},t=a([c],t)}(i.Base_Panel));n.default=l,cc._RF.pop()},{"../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"c14c4khHkdOq6DuHXiu6iOt","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._musicVolume=1,this._effectVolume=1,this.bool_PauseAudio=!1,this.init()}return e.getInstance=function(){return e._instance||(e._instance=new e),this._instance},e.prototype.init=function(){this.bool_PauseAudio=!1;var e=cc.sys.localStorage.getItem("musicVolume"),t=cc.sys.localStorage.getItem("effectVolume");this.musicVolume=null==e?this.musicVolume:parseFloat(e),this.effectVolume=null==t?this.effectVolume:parseFloat(t),cc.game.on(cc.game.EVENT_HIDE,function(){this.pauseAll()}.bind(this)),cc.game.on(cc.game.EVENT_SHOW,function(){this.resumeAll()}.bind(this))},e.prototype.getAudioUrl=function(e){return cc.url.raw("resources/sounds/"+e+".mp3")},e.prototype.playEffect=function(e){var t;return cc.AudioClip._loadByUrl(this.getAudioUrl(e),function(e,n){n&&(t=cc.audioEngine.playEffect(n,!1))}),t},e.prototype.playMusic=function(e){var t;return cc.AudioClip._loadByUrl(this.getAudioUrl(e),function(e,n){n&&(t=cc.audioEngine.playMusic(n,!0))}),t},e.prototype.AudioPauseOrPlay=function(){return this.bool_PauseAudio?(this.bool_PauseAudio=!1,cc.audioEngine.setMusicVolume(1),cc.audioEngine.setEffectsVolume(1),this.bool_PauseAudio):(this.bool_PauseAudio=!0,cc.audioEngine.setMusicVolume(0),cc.audioEngine.setEffectsVolume(0),this.bool_PauseAudio)},e.prototype.pauseAll=function(){return this.bool_PauseAudio=!0,cc.audioEngine.pauseAll(),this.bool_PauseAudio},e.prototype.resumeAll=function(){return this.bool_PauseAudio=!1,cc.audioEngine.resumeAll(),this.bool_PauseAudio},Object.defineProperty(e.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){this._musicVolume=e>=0||e<=1?e:this._musicVolume,cc.audioEngine.setMusicVolume(this._musicVolume),cc.sys.localStorage.setItem("musicVolume",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectVolume",{get:function(){return this._effectVolume},set:function(e){this._effectVolume=e>=0||e<=1?e:this.effectVolume,cc.audioEngine.setEffectsVolume(this.effectVolume),cc.sys.localStorage.setItem("effectVolume",e)},enumerable:!0,configurable:!0}),e}();n.AudioManager=o,cc._RF.pop()},{}],Base_Panel:[function(e,t,n){"use strict";cc._RF.push(t,"c9726DmSM1Ia4HijDmp704C","Base_Panel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i,r=e("../manager/AudioManager"),s=e("../manager/Global"),c=cc._decorator,l=c.ccclass,_=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.Full,t.bool_IsScale=!1,t._tween_ScaleBig=cc.tween().to(.1,{scale:1.1,easing:"sineOutIn"}),t._tween_ScaleLittle=cc.tween().to(.05,{scale:1,easing:"sineOutIn"}),t}return o(t,e),t.prototype.onLoad=function(){this._canvas=cc.find("Canvas"),this._widget=this.getComponent(cc.Widget),this._widget.target=this._canvas},t.prototype.OnEnter=function(e){},t.prototype.OnExit=function(){this.node.active&&(this.node.active=!1)},t.prototype.AddBtnClickEvent=function(e,t,n,o,a){var i=this,r=s.Global.GetInstance().FindNodeRecursively(t,e).getComponent(cc.Button);return r.node.off(cc.Node.EventType.TOUCH_END),r.node.on(cc.Node.EventType.TOUCH_END,function(){i.BtnClickPlayAudio(a)}),r.node.on(cc.Node.EventType.TOUCH_END,function(){i.BtnScale(r.node,o,function(){n(r)})}),r},t.prototype.AddBtnGeneralClickEvent=function(e,t,n,o){var a=this;e.off(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(){a.BtnScale(e,n,function(){t(e)})},this)},t.prototype.BtnScale=function(e,t,n){var o=this;this.bool_IsScale||(this.bool_IsScale=!0,t?cc.tween(e).then(this._tween_ScaleBig).then(this._tween_ScaleLittle).call(n).start():n(),cc.tween(e).delay(.5).call(function(){o.bool_IsScale=!1}).start())},t.prototype.BtnClickPlayAudio=function(e){if(e){if("Null"==e)return;r.AudioManager.getInstance().playEffect(e)}else r.AudioManager.getInstance().playEffect("Btn")},t=a([l],t)}(cc.Component));n.Base_Panel=_,function(e){e[e.Full=0]="Full",e[e.Popup=1]="Popup"}(i=n.PanelType||(n.PanelType={})),cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/Global":"Global"}],Base_Role:[function(e,t,n){"use strict";cc._RF.push(t,"168a6jTcaNAI6aIf8kBUiIy","Base_Role");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../manager/Global"),r=e("../manager/EventManager"),s=e("../manager/AudioManager"),c=cc._decorator,l=c.ccclass,_=(c.property,function(){return function(){this._v3_CreatorPos=void 0,this._str_Damege="undefined",this._v3_CreatorPos=void 0,this._str_Damege="undefined"}}());n.BeHurtFontData=_;var u,d,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._num_HP=0,t._num_InitHPSave=0,t._num_MP=0,t._num_Damage=0,t._num_Defense=0,t._num_BlockingPower=80,t._bool_IsDie=!0,t._enum_Type=void 0,t._enmu_State=void 0,t._db_Role=void 0,t._ts_Target=void 0,t._probar_Hp=void 0,t._probar_Mp=void 0,t._lab_Hp=void 0,t._lab_Defense=void 0,t._lab_Attack=void 0,t._db_AttEffect=void 0,t}return o(t,e),t.prototype.onLoad=function(){this._db_Role=i.Global.GetInstance().FindNodeRecursively(this.node,"dragonBones").getComponent(dragonBones.ArmatureDisplay),this._probar_Hp=i.Global.GetInstance().FindNodeRecursively(this.node,"HP").getComponent(cc.ProgressBar),this._probar_Mp=i.Global.GetInstance().FindNodeRecursively(this.node,"MP").getComponent(cc.ProgressBar),this._lab_Hp=i.Global.GetInstance().FindNodeRecursively(this.node,"HP_Lable").getComponent(cc.Label),this._lab_Defense=i.Global.GetInstance().FindNodeRecursively(this.node,"Defense_Label").getComponent(cc.Label),this._lab_Attack=i.Global.GetInstance().FindNodeRecursively(this.node,"Attack_Label").getComponent(cc.Label),this._db_Role.removeEventListener(dragonBones.EventObject.COMPLETE,this.AnimationEventHandler,this),this._db_Role.addEventListener(dragonBones.EventObject.COMPLETE,this.AnimationEventHandler,this),this.node.on(cc.Node.EventType.TOUCH_END,this.MouseDownEvent)},t.prototype.MouseDownEvent=function(e){e.stopPropagation()},t.prototype.InitialRoleData=function(e,t,n,o,a,i){this.node.color=cc.color(255,255,255,255),this.PlayIdle(),this._num_Damage=e,this._num_HP=t,this._num_InitHPSave=t,this._num_MP=n,this._num_Defense=o,this._enum_Type=a,this._enmu_State=u.Idle,this._bool_IsDie=!1,this._probar_Hp.progress=1,this._lab_Hp.string=this._num_HP.toString(),this._lab_Defense.string=this._num_Defense.toString(),i<1&&(i=1),this._num_AttInterval=i,this._lab_Attack.string=0==e?"0":e-10+"-"+(e+10)},t.prototype.TimedAttack=function(e){e._bool_IsDie||(this._ts_Target=e,this.schedule(this.TimedAttackCallback,this._num_AttInterval,cc.macro.REPEAT_FOREVER,this._num_AttInterval))},t.prototype.TimedAttackCallback=function(){i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&(this._ts_Target._bool_IsDie&&this.TimedAttackStop(),this._ts_Target.BeHurt(i.Global.GetInstance().Random_int(this._num_Damage-10,this._num_Damage+10))&&this.TimedAttackStop(),this.PlayAttack())},t.prototype.TimedAttackStop=function(){this.unschedule(this.TimedAttackCallback)},t.prototype.BeHurt=function(e){if(!this._bool_IsDie){var t=cc.color(255,255,255,255);return this._enmu_State==u.Defense?(e<this._num_BlockingPower?e=0:e-=this._num_BlockingPower,cc.tween(this.node).to(.1,{scale:1.03}).delay(.1).to(.1,{scale:1}).start(),t=cc.color(200,180,0,255)):t=cc.color(255,0,0,255),(e-=this._num_Defense)<0&&(e=0),(this._num_HP-=e)<=0&&this.PlayDie(),this._lab_Hp.string=this._num_HP.toString(),this._probar_Hp.progress=this._num_HP/this._num_InitHPSave,cc.tween(this._db_Role.node).to(.1,{color:cc.color(255,0,0,255)}).delay(.1).to(.1,{color:cc.color(255,255,255,255)}).start(),this.BeHurtTips("-"+e,t),this._bool_IsDie}},t.prototype.BeHurtTips=function(e,t){var n=[];n.push(e),n.push(this.node.position),n.push(t),r.default.emit("CreateFonts",n)},t.prototype.RestoreHp=function(e){this._bool_IsDie||(this._num_HP+=e,this._num_HP>this._num_InitHPSave&&(this._num_HP=this._num_InitHPSave),this.BeHurtTips("+"+e,cc.color(50,240,0,255)),this._lab_Hp.string=this._num_HP.toString(),this._probar_Hp.progress=this._num_HP/this._num_InitHPSave)},t.prototype.PlayIdle=function(){this._enmu_State=u.Idle,this._db_Role.playAnimation("idle",0)},t.prototype.PlayAttack=function(){var e=this;this._enmu_State!=u.Att&&(this._enmu_State=u.Att,this._db_Role.timeScale=2,this._db_Role.playAnimation("att",1),this._enum_Type==d.Hero&&(s.AudioManager.getInstance().playEffect("HeroAtt"),void 0==this._db_AttEffect&&(this._db_AttEffect=this.node.children[3].getComponent(dragonBones.ArmatureDisplay),this._db_AttEffect.removeEventListener(dragonBones.EventObject.COMPLETE,this.AttEffectEventHandler,this),this._db_AttEffect.addEventListener(dragonBones.EventObject.COMPLETE,this.AttEffectEventHandler,this)),this.scheduleOnce(function(){if(void 0!=e._ts_Target&&!e._ts_Target._bool_IsDie){e._db_AttEffect.node.active=!0;var t=e._ts_Target.node.parent.convertToWorldSpaceAR(e._ts_Target.node.getPosition()),n=e._db_AttEffect.node.parent.convertToNodeSpaceAR(t);e._db_AttEffect.node.setPosition(cc.v2(n.x-100,n.y)),e._db_AttEffect.playAnimation("Sprite",1)}},.2)))},t.prototype.AttEffectEventHandler=function(e){if(e.type===dragonBones.EventObject.COMPLETE)switch(e.animationState.name){case"Sprite":this._db_AttEffect.node.active=!1}},t.prototype.PlayDefense=function(){this._enmu_State=u.Defense,this._db_Role.playAnimation("defense",0)},t.prototype.PlayDie=function(){this._bool_IsDie=!0,this._lab_Hp.string="0",this._probar_Hp.progress=0,this._num_HP=0,this._enmu_State=u.Die,this._db_Role.playAnimation("die",1),this.TimedAttackStop()},t.prototype.AnimationEventHandler=function(e){if(this._db_Role.timeScale=1,e.type===dragonBones.EventObject.COMPLETE)switch(e.animationState.name){case"att":this._db_Role.playAnimation("idle",0),this._enmu_State=u.Idle;break;case"die":this.DieCallBack()}},t.prototype.ForceDestroy=function(){this.TimedAttackStop(),this.node&&this.node.destroy()},t.prototype.DieCallBack=function(){this.node.destroy()},t=a([l],t)}(cc.Component);n.default=p,function(e){e[e.Att=0]="Att",e[e.Defense=1]="Defense",e[e.Idle=2]="Idle",e[e.Die=3]="Die"}(u=n.RoleActionState||(n.RoleActionState={})),function(e){e[e.Hero=0]="Hero",e[e.Monster=1]="Monster"}(d=n.RoleType||(n.RoleType={})),cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/EventManager":"EventManager","../manager/Global":"Global"}],BattleManager:[function(e,t,n){"use strict";cc._RF.push(t,"957fb6ku4NPSZ7MKcxA6Pi2","BattleManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Global"),r=e("../role/Base_Role"),s=e("./EventManager"),c=e("./ResourceManager"),l=e("../role/MonsterRole"),_=e("../role/HeroRole"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._node_MonsterAllPosData=void 0,t._node_HeroAllParent=void 0,t._node_MonsterParent=void 0,t._node_HeroParent=void 0,t._ts_Hero=void 0,t._ts_CurrentMonster=void 0,t._ts_LevelData=void 0,t._num_WaveNum=void 0,t._num_CurrentWave=void 0,t._num_TotlaMonsterNum=void 0,t._num_KillMonsterNum=void 0,t._num_CurrentWaveMonsterNum=void 0,t._num_CurrentKillMonsterNum=void 0,t._num_CurrentSelectLevel=void 0,t._arr_WavaNum=[],t._arr_CurrentWavaMonster=[],t._arr_MonsterName=["Monster_1","Monster_2"],t}return o(t,e),t.prototype.onLoad=function(){this._node_MonsterParent=i.Global.GetInstance().FindNodeRecursively(this.node,"MonsterParent"),this._node_HeroParent=i.Global.GetInstance().FindNodeRecursively(this.node,"HeroParent"),this._node_HeroAllParent=i.Global.GetInstance().FindNodeRecursively(this.node,"HeroAllParent"),this._node_MonsterAllPosData=i.Global.GetInstance().FindNodeRecursively(this.node,"MonsterAllPosData"),s.default.on("MouseDownMonster",this,this.MouseDownMonsterCallBack),s.default.on("MouseDownHero",this,this.MouseDownHeroCallBack),s.default.on("HeroDie",this,this.HeroDieCallBack),s.default.on("MonsterDie",this,this.MonsterDieCallBack),s.default.on("BattleInitial",this,this.BattleInitialCallBack),s.default.on("BattleExit",this,this.BattleExitCallBack),s.default.on("DefenceClick",this,this.DefenceClickCallBack),s.default.on("AttackClick",this,this.AttackClickCallBack),s.default.on("HeroRestoreHp",this,this.HeroRestoreHpCallBack),i.Global.GetInstance()._enum_GameState=i.GameState.over},t.prototype.BattleInitialCallBack=function(e){this._ts_LevelData=e.getUserData(),this._num_WaveNum=this._ts_LevelData.Wave,this._num_CurrentWave=0,this._num_KillMonsterNum=0,this._num_CurrentSelectLevel=i.Global.GetInstance()._num_CurrentSelectLevel,this.AddNumberPerWave(this._ts_LevelData),i.Global.GetInstance()._enum_GameState=i.GameState.run,this.HeroCreation(),this.MonsterCreation()},t.prototype.HeroCreation=function(){var e=c.ResourceManager.getInstance().getRes("prefab/rolePre/Hero_"+i.Global.GetInstance().num_CurrentSelectHeroIndex,cc.Prefab),t=cc.instantiate(e);t.setParent(this._node_HeroParent),t.position=this._node_HeroAllParent.children[0].children[0].position,this._ts_Hero=t.getComponent(_.default);for(var n=0,o=0,a=0,s=0,l=0;l<i.Global.GetInstance()._arr_str_EquipDataKey.length;l++){var u=i.Global.GetInstance()._dic_EquipData[i.Global.GetInstance()._arr_str_EquipDataKey[l]];if("Null"!=u){var d=i.Global.GetInstance().GetGoodsData(u);switch(i.Global.GetInstance()._arr_str_EquipDataKey[l]){case"weapon_":n=d.Att;break;case"jia0":o=d.Hp;break;case"dun0":s=d.Def;break;case"jie0":a=d.Mp}}else cc.log("\u8df3\u51fa\u672c\u6b21-")}1==i.Global.GetInstance().num_CurrentSelectHeroIndex&&(n+=150,o+=1500,a+=800,s+=30),2==i.Global.GetInstance().num_CurrentSelectHeroIndex&&(n=250,o=1200,a=1e3,s=25),this._ts_Hero.InitialRoleData(n,o,a,s,r.RoleType.Hero,10)},t.prototype.MonsterCreation=function(){if(i.Global.GetInstance()._enum_GameState!=i.GameState.over&&i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&!(this._num_CurrentWave>=this._num_WaveNum)){this._num_CurrentWave++,this._num_CurrentKillMonsterNum=0,this._arr_CurrentWavaMonster=[],this._ts_CurrentMonster=void 0,this._num_CurrentWaveMonsterNum=this._arr_WavaNum[this._num_CurrentWave-1];for(var e=this._node_MonsterAllPosData.children[this._num_CurrentWaveMonsterNum-1],t=0;t<this._num_CurrentWaveMonsterNum;t++){var n=void 0,o=!1;if(this._num_CurrentWave==this._num_WaveNum&&t==this._num_CurrentWaveMonsterNum-1)o=!0,n=c.ResourceManager.getInstance().getRes("prefab/rolePre/Monster_Box",cc.Prefab);else{o=!1;var a=i.Global.GetInstance().Random_int(this._num_CurrentSelectLevel,this._num_CurrentSelectLevel+1);a=a>6?i.Global.GetInstance().Random_int(1,6):a,n=c.ResourceManager.getInstance().getRes("prefab/rolePre/Monster_"+a,cc.Prefab)}var r=cc.instantiate(n);r.setParent(this._node_MonsterParent);var s=e.children[t].position;this.MonsterInit(r,s,o)}}},t.prototype.MonsterInit=function(e,t,n){var o=this,a=e.getComponent(l.default);this._arr_CurrentWavaMonster.push(a),e.setPosition(cc.v3(2e3,t.y,0)),cc.tween(e).to(1,{position:cc.v3(t.x,t.y,0)},{easing:"sineOutIn"}).call(function(){var e=1e3+Math.pow(o._num_CurrentSelectLevel,2)+100*o._num_CurrentSelectLevel,t=100+15*o._num_CurrentSelectLevel,i=5*o._num_CurrentSelectLevel,s=3.5-.5*(o._num_CurrentSelectLevel-1);n?a.InitialRoleData(0,e,0,i,r.RoleType.Monster,s):(a.InitialRoleData(t,e,800,i,r.RoleType.Monster,s),a.TimedAttack(o._ts_Hero))}).start()},t.prototype.MouseDownMonsterCallBack=function(e){if(i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&this._ts_Hero._enmu_State!=r.RoleActionState.Att&&!this._ts_Hero._bool_IsDie){var t=e.getUserData();t.getComponent(r.default)._enum_Type==r.RoleType.Monster&&(this._ts_CurrentMonster=t.getComponent(r.default),this._ts_Hero._ts_Target=this._ts_CurrentMonster,this._ts_CurrentMonster.BeHurt(i.Global.GetInstance().Random_int(this._ts_Hero._num_Damage-10,this._ts_Hero._num_Damage+10)),this._ts_Hero.PlayAttack())}},t.prototype.MouseDownHeroCallBack=function(e){i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&(this._ts_Hero._bool_IsDie||this._ts_Hero.PlayDefense())},t.prototype.BattleExitCallBack=function(){this.ClearData()},t.prototype.DefenceClickCallBack=function(){i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&(this._ts_Hero._bool_IsDie||this.MouseDownHeroCallBack(null))},t.prototype.AttackClickCallBack=function(){i.Global.GetInstance()._enum_GameState!=i.GameState.pause&&this._ts_Hero._enmu_State!=r.RoleActionState.Att&&(this._ts_Hero._bool_IsDie||(void 0==this._ts_CurrentMonster&&(this._ts_CurrentMonster=this._arr_CurrentWavaMonster[0]),this._ts_CurrentMonster._bool_IsDie||(this._ts_Hero._ts_Target=this._ts_CurrentMonster,this._ts_CurrentMonster.BeHurt(this._ts_Hero._num_Damage),this._ts_Hero.PlayAttack())))},t.prototype.HeroRestoreHpCallBack=function(e){var t=e.getUserData();this._ts_Hero.RestoreHp(t)},t.prototype.HeroDieCallBack=function(e){this.GameOver(!1)},t.prototype.MonsterDieCallBack=function(e){var t=this;if(this._num_KillMonsterNum+=1,this._num_CurrentKillMonsterNum+=1,this._num_KillMonsterNum>=this._num_TotlaMonsterNum)this.GameOver(!0);else if(this._num_CurrentKillMonsterNum==this._num_CurrentWaveMonsterNum)s.default.emit("CurrentWaveMonsterDie"),this.scheduleOnce(function(){t.MonsterCreation()},1);else{var n=e.getUserData();this._arr_CurrentWavaMonster.splice(this._arr_CurrentWavaMonster.indexOf(this._ts_CurrentMonster),1),this._ts_CurrentMonster.node==n&&(this._ts_CurrentMonster=void 0)}},t.prototype.GameOver=function(e){this.ClearData(),s.default.emit("GameOver",e)},t.prototype.ClearData=function(){this._ts_Hero.ForceDestroy();for(var e=0;e<this._arr_CurrentWavaMonster.length;e++)this._arr_CurrentWavaMonster[e].ForceDestroy();for(e=0;e<this._node_MonsterParent.childrenCount;e++)this._node_MonsterParent.children[e].destroy()},t.prototype.AddNumberPerWave=function(e){this._num_TotlaMonsterNum=0,this._arr_WavaNum=[],this._arr_WavaNum.push(e.WaveNumber_1),this._arr_WavaNum.push(e.WaveNumber_2),this._arr_WavaNum.push(e.WaveNumber_3),this._arr_WavaNum.push(e.WaveNumber_4),this._arr_WavaNum.push(e.WaveNumber_5),this._arr_WavaNum.push(e.WaveNumber_6),this._arr_WavaNum.push(e.WaveNumber_7),this._arr_WavaNum.push(e.WaveNumber_8),this._arr_WavaNum.push(e.WaveNumber_9),this._arr_WavaNum.push(e.WaveNumber_10),this._arr_WavaNum.push(e.WaveNumber_11),this._arr_WavaNum.push(e.WaveNumber_12),this._arr_WavaNum.push(e.WaveNumber_13),this._arr_WavaNum.push(e.WaveNumber_14);for(var t=0;t<e.Wave;t++)this._num_TotlaMonsterNum+=this._arr_WavaNum[t]},t=a([d],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../role/Base_Role":"Base_Role","../role/HeroRole":"HeroRole","../role/MonsterRole":"MonsterRole","./EventManager":"EventManager","./Global":"Global","./ResourceManager":"ResourceManager"}],BattlePanel:[function(e,t,n){"use strict";cc._RF.push(t,"fa796zZ3pRC3q+vUgV8bquq","BattlePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/AudioManager"),s=e("../manager/UIManager"),c=e("../manager/EventManager"),l=e("../manager/ResourceManager"),_=e("../manager/Global"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Full,t._arr_levelData=void 0,t._db_Over=void 0,t._bool_IsWin=void 0,t._node_DragonBonesParent=void 0,t._node_Equiplayout=void 0,t._node_FontsParent=void 0,t._node_Floor_1=void 0,t._node_Floor_2=void 0,t._node_Stone_Bottom_1=void 0,t._node_Stone_Bottom_2=void 0,t._node_BG1=void 0,t._node_BG2=void 0,t._node_Thorn1=void 0,t._node_Thorn2=void 0,t._node_FloorTile_1=void 0,t._node_FloorTile_2=void 0,t._bool_IsMoveBg=!1,t._num_MoveTime=0,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._node_Equiplayout=_.Global.GetInstance().FindNodeRecursively(this.node,"Equiplayout"),this._node_DragonBonesParent=_.Global.GetInstance().FindNodeRecursively(this.node,"DragonBonesParent"),this._node_FontsParent=_.Global.GetInstance().FindNodeRecursively(this.node,"FontsParent"),this._node_Floor_1=_.Global.GetInstance().FindNodeRecursively(this.node,"Floor_1"),this._node_Floor_2=_.Global.GetInstance().FindNodeRecursively(this.node,"Floor_2"),this._node_Stone_Bottom_1=_.Global.GetInstance().FindNodeRecursively(this.node,"Stone_Bottom_1"),this._node_Stone_Bottom_2=_.Global.GetInstance().FindNodeRecursively(this.node,"Stone_Bottom_2"),this._node_BG1=_.Global.GetInstance().FindNodeRecursively(this.node,"BG1"),this._node_BG2=_.Global.GetInstance().FindNodeRecursively(this.node,"BG2"),this._node_Thorn1=_.Global.GetInstance().FindNodeRecursively(this.node,"Thorn1"),this._node_Thorn2=_.Global.GetInstance().FindNodeRecursively(this.node,"Thorn2"),this._node_FloorTile_1=_.Global.GetInstance().FindNodeRecursively(this.node,"FloorTile_1"),this._node_FloorTile_2=_.Global.GetInstance().FindNodeRecursively(this.node,"FloorTile_2"),this.AddBtnClickEvent("PauseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("DefenceBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("AttackBtn",this.node,this.AddBtnOnClick.bind(this),!0,"Null"),c.default.on("GameOver",this,this.GameOver.bind(this)),this._arr_levelData=l.ResourceManager.getInstance().getRes("json/LevelData",cc.JsonAsset).json,c.default.on("CreateFonts",this,this.CreateFounsCallBack.bind(this)),c.default.on("CurrentWaveMonsterDie",this,this.CurrentWaveMonsterDieCallBack.bind(this))},t.prototype.OnEnter=function(e){this._bool_IsMoveBg=!1,this._node_DragonBonesParent.active=!1,this.EquipDataInit(),c.default.emit("BattleInitial",this._arr_levelData[_.Global.GetInstance()._num_CurrentSelectLevel-1]),r.AudioManager.getInstance().playMusic("BGMBATTLE")},t.prototype.update=function(e){this._bool_IsMoveBg&&(this._num_MoveTime+=e,this._num_MoveTime>=1&&(this._num_MoveTime=0,this._bool_IsMoveBg=!1),this.MoveBG(this._node_Stone_Bottom_1,3425,e,300),this.MoveBG(this._node_Stone_Bottom_2,3425,e,300),this.MoveBG(this._node_Thorn1,3425,e,300),this.MoveBG(this._node_Thorn2,3425,e,300),this.MoveBG(this._node_FloorTile_1,3425,e,100),this.MoveBG(this._node_FloorTile_2,3425,e,100),this.MoveBG(this._node_Floor_1,3425,e,60),this.MoveBG(this._node_Floor_2,3425,e,60),this.MoveBG(this._node_BG1,3425,e,30),this.MoveBG(this._node_BG2,3425,e,30))},t.prototype.MoveBG=function(e,t,n,o){e.x-=o*n;var a=Math.abs(e.x);if(a>=t){var i=a-t;e.x=t-i}},t.prototype.MoveBG2=function(e,t,n,o){e.x+=o*n;var a=Math.abs(e.x);if(a>=t){var i=a-t;e.x=-(t-i)}},t.prototype.CreateFounsCallBack=function(e){var t=e.getUserData(),n=cc.instantiate(l.ResourceManager.getInstance().getRes("prefab/otherPre/BattleTips",cc.Prefab));n.setParent(this._node_FontsParent),n.setPosition(t[1]),n.getComponent(cc.Label).string=t[0],n.color=t[2],n.scale=0;var o=cc.tween;o(n).parallel(o().to(.3,{scale:1,easing:"sineOutIn"}),o().to(.3,{position:cc.v2(n.x+80,n.y+100),easing:"sineOutIn"}),o().to(.3,{opacity:255})).call(function(){o(n).parallel(o().to(.5,{scale:0,easing:"sineOutIn"}),o().to(.5,{position:cc.v2(n.x,n.y+700),easing:"sineOutIn"}).call(function(){n.destroy()}),o().to(.3,{opacity:0})).start()}).start()},t.prototype.AnimationEventHandler=function(e){if(e.type===dragonBones.EventObject.COMPLETE)switch(e.animationState.name){case"a":this._db_Over.playAnimation("b",1);break;case"b":this._db_Over.timeScale=.5,this._db_Over.playAnimation("c",1);break;case"c":this._db_Over.timeScale=1,this._db_Over.node.active=!1,this._bool_IsWin?s.default.getInstance().ShowPanel("GameOverPanel","Win"):s.default.getInstance().ShowPanel("GameOverPanel","Lost")}},t.prototype.EquipDataInit=function(){for(var e=0;e<this._node_Equiplayout.childrenCount;e++)this._node_Equiplayout.children[e].destroy();var t=_.Global.GetInstance()._dic_EquipData.Hp1,n=_.Global.GetInstance()._dic_EquipData.Hp2;this.CreatorEquipItem(t,!1,"Hp1"),"Null"!=n?this.CreatorEquipItem(n,!1,"Hp2"):this.CreatorEquipItem(t,!1,"Hp1");for(e=0;e<4;e++)this.CreatorEquipItem("Null",!0,"Null")},t.prototype.OnExit=function(){c.default.emit("BattleExit"),r.AudioManager.getInstance().playMusic("BGM"),e.prototype.OnExit.call(this)},t.prototype.GameOver=function(e){this._node_DragonBonesParent.active=!0,this._bool_IsWin=e.getUserData(),this._bool_IsWin?(this._db_Over=_.Global.GetInstance().FindNodeRecursively(this.node,"Win_Dra").getComponent(dragonBones.ArmatureDisplay),r.AudioManager.getInstance().playEffect("Win")):(this._db_Over=_.Global.GetInstance().FindNodeRecursively(this.node,"Lost_Dra").getComponent(dragonBones.ArmatureDisplay),r.AudioManager.getInstance().playEffect("Lost")),this._db_Over.node.active=!0,this._db_Over.removeEventListener(dragonBones.EventObject.COMPLETE,this.AnimationEventHandler,this),this._db_Over.addEventListener(dragonBones.EventObject.COMPLETE,this.AnimationEventHandler,this),this._db_Over.playAnimation("a",1)},t.prototype.CurrentWaveMonsterDieCallBack=function(e){this._bool_IsMoveBg=!0},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"PauseBtn":s.default.getInstance().ShowPanel("PausePanel");break;case"DefenceBtn":c.default.emit("DefenceClick");break;case"AttackBtn":c.default.emit("AttackClick")}},t.prototype.CreatorEquipItem=function(e,t,n){var o=cc.instantiate(l.ResourceManager.getInstance().getRes("prefab/otherPre/GoodsItem",cc.Prefab));if(t)o.children[2].active=!1,o.setParent(this._node_Equiplayout),o.off(cc.Node.EventType.TOUCH_END),this.AddBtnGeneralClickEvent(o,function(){s.default.getInstance().NotificationTips("Not unlocked")},!0);else if("Null"!=e){var a="sprite/"+e;o.children[0].getComponent(cc.Sprite).spriteFrame=l.ResourceManager.getInstance().getRes(a,cc.SpriteFrame),o.children[2].active=!1,o.setParent(this._node_Equiplayout),o.name=n,o.off(cc.Node.EventType.TOUCH_END),this.AddBtnGeneralClickEvent(o,this.EquipBtnCallBack.bind(this),!0)}else o.children[0].active=!1,o.children[2].active=!1,o.setParent(this._node_Equiplayout)},t.prototype.EquipBtnCallBack=function(e){var t=_.Global.GetInstance().GetGoodsData(e.name);c.default.emit("HeroRestoreHp",t.Heal),e.off(cc.Node.EventType.TOUCH_END),e.children[0].active=!1,_.Global.GetInstance().SetEquipData(e.name,"Null")},t=a([d],t)}(i.Base_Panel));n.default=p,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/EventManager":"EventManager","../manager/Global":"Global","../manager/ResourceManager":"ResourceManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],ClickTest:[function(e,t,n){"use strict";cc._RF.push(t,"32f24aDVzlO6ZVwaStwzkRI","ClickTest");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.ClickEvent=function(e){},a([s(cc.Label)],t.prototype,"label",void 0),a([s],t.prototype,"text",void 0),t=a([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],EquipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"b217bID4HpHXro2J1XqHCzF","EquipPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/ResourceManager"),c=e("../manager/Global"),l=e("../GoodsItem"),_=e("../manager/AudioManager"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t._node_SelectTips=void 0,t._node_EquipItemLayout=void 0,t._node_SkillItemLayout=void 0,t._node_EquipBottom=void 0,t._node_EquipOrRemove=void 0,t._node_HeroParent=void 0,t._lab_EquipOrRemove=void 0,t._lab_Damage=void 0,t._lab_Health=void 0,t._lab_Defence=void 0,t._lab_Class=void 0,t._lab_Mana=void 0,t._lab_Heal=void 0,t._lab_Name=void 0,t._lab_Describe=void 0,t._lab_Buy=void 0,t._lab_Sell=void 0,t._dic_node_SellItem={},t._arr_str_SellName=[],t._bool_FirstOpen=!0,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this._node_HeroParent=c.Global.GetInstance().FindNodeRecursively(this.node,"HeroParent"),this._node_EquipItemLayout=c.Global.GetInstance().FindNodeRecursively(this.node,"EquipItemLayout"),this._node_SkillItemLayout=c.Global.GetInstance().FindNodeRecursively(this.node,"SkillItemLayout"),this._node_EquipOrRemove=c.Global.GetInstance().FindNodeRecursively(this.node,"EquipOrRemoveBtn"),this._node_EquipBottom=c.Global.GetInstance().FindNodeRecursively(this.node,"EquipBottom"),this._lab_EquipOrRemove=c.Global.GetInstance().FindNodeRecursively(this._node_EquipOrRemove,"EquipOrRemove").getComponent(cc.Label),this._lab_Damage=c.Global.GetInstance().FindNodeRecursively(this.node,"Damage_lab").getComponent(cc.Label),this._lab_Health=c.Global.GetInstance().FindNodeRecursively(this.node,"Health_lab").getComponent(cc.Label),this._lab_Defence=c.Global.GetInstance().FindNodeRecursively(this.node,"Defence_lab").getComponent(cc.Label),this._lab_Class=c.Global.GetInstance().FindNodeRecursively(this.node,"Class_lab").getComponent(cc.Label),this._lab_Mana=c.Global.GetInstance().FindNodeRecursively(this.node,"Mana_lab").getComponent(cc.Label),this._lab_Heal=c.Global.GetInstance().FindNodeRecursively(this.node,"Heal_lab").getComponent(cc.Label),this._lab_Name=c.Global.GetInstance().FindNodeRecursively(this.node,"Name_lab").getComponent(cc.Label),this._lab_Describe=c.Global.GetInstance().FindNodeRecursively(this.node,"Describt_lab").getComponent(cc.Label),this._lab_Buy=c.Global.GetInstance().FindNodeRecursively(this.node,"Buy_lab").getComponent(cc.Label),this._lab_Sell=c.Global.GetInstance().FindNodeRecursively(this.node,"Sell_lab").getComponent(cc.Label);for(var t=0;t<this._node_EquipBottom.childrenCount;t++)for(var n=this._node_EquipBottom.children[t],o=0;o<n.childrenCount;o++)n.children[o].destroy();for(o=0;o<c.Global.GetInstance()._arr_str_EquipDataKey.length;o++){var a=c.Global.GetInstance()._dic_EquipData[c.Global.GetInstance()._arr_str_EquipDataKey[o]];"Null"!=a&&this.EquipGoods(a)}for(var i=0;i<this._node_SkillItemLayout.childrenCount;i++)i<1?this._node_SkillItemLayout.children[i].on(cc.Node.EventType.TOUCH_END,function(){r.default.getInstance().NotificationTips("Use of combat interface")}):this._node_SkillItemLayout.children[i].on(cc.Node.EventType.TOUCH_END,function(){r.default.getInstance().NotificationTips("Lack of resources")})},t.prototype.OnEnter=function(e){this.TraverseCreatorItem(),1==c.Global.GetInstance().num_CurrentSelectHeroIndex&&(this._node_HeroParent.children[0].active=!0,this._node_HeroParent.children[1].active=!1),2==c.Global.GetInstance().num_CurrentSelectHeroIndex&&(this._node_HeroParent.children[1].active=!0,this._node_HeroParent.children[0].active=!1)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":r.default.getInstance().ClosePanel(this.node)}},t.prototype.TraverseCreatorItem=function(){this._dic_node_SellItem={},this._arr_str_SellName=[];for(var e=0;e<this._node_EquipItemLayout.childrenCount;e++)this._node_EquipItemLayout.children[e].destroy();for(e=0;e<c.Global.GetInstance()._arr_AllGoodsName.length;e++){var t=c.Global.GetInstance()._arr_AllGoodsName[e],n=c.Global.GetInstance().GetGoodsQuantity(t);n>0&&this.CreatorEquipItem(t,n,this._node_EquipItemLayout,!1)}},t.prototype.CreatorEquipItem=function(e,t,n,o){var a=this,i=cc.instantiate(s.ResourceManager.getInstance().getRes("prefab/otherPre/GoodsItem",cc.Prefab)),r="sprite/"+e;i.children[0].getComponent(cc.Sprite).spriteFrame=s.ResourceManager.getInstance().getRes(r,cc.SpriteFrame),i.children[2].getComponent(cc.Label).string=t.toString(),i.setParent(n),i.setPosition(cc.v3(0,0,0));var _=i.addComponent(l.default),u=c.Global.GetInstance().GetGoodsData(e);_.InitGoodsItem(u.Name,u.Describe,u.Type,u.Buy,u.Sell,u.Att,u.Def,u.Hp,u.Mp,u.Heal,t,o,u.spare1),o||(this._arr_str_SellName.push(e),this._dic_node_SellItem[e]=i),i.off(cc.Node.EventType.TOUCH_END),i.on(cc.Node.EventType.TOUCH_END,function(){a.GoodsItemOnClick(i,!0)}),this._bool_FirstOpen&&(this._bool_FirstOpen=!1,this.GoodsItemOnClick(i,this._bool_FirstOpen))},t.prototype.GoodsItemOnClick=function(e,t){var n=this,o=e.getComponent(l.default);this.SetSelectTips(e.children[1]),this._lab_Damage.string="Damage  :  "+o._num_Att.toString(),this._lab_Defence.string="Defence  :  "+o._num_Def.toString(),this._lab_Heal.string="Heal        :  "+o._num_Heal.toString(),this._lab_Health.string="Health    :  "+o._num_Hp.toString(),this._lab_Mana.string="Mana      :  "+o._num_Mp.toString(),this._lab_Sell.string="Sell         :  "+o._num_Sell.toString(),this._lab_Buy.string="Buy         :  "+o._num_Buy.toString(),this._lab_Describe.string=o._str_DescribePro.toString(),this._lab_Name.string=o._str_Describe.toString(),"1"==o._str_Type?this._lab_Class.string="Class       :  Equip":this._lab_Class.string="Class       :  Food",o._bool_IsBuy?this._lab_EquipOrRemove.string="Remove":this._lab_EquipOrRemove.string="Equip",this._node_EquipOrRemove.off(cc.Node.EventType.TOUCH_END),this._node_EquipOrRemove.on(cc.Node.EventType.TOUCH_END,function(){n.EquipOrRemoveOnClick(e)}),t&&_.AudioManager.getInstance().playEffect("Btn")},t.prototype.EquipOrRemoveOnClick=function(e){if(e){_.AudioManager.getInstance().playEffect("Ling");var t=e.children[2].getComponent(cc.Label),n=e.getComponent(l.default);if(n._bool_IsBuy){if(this._arr_str_SellName.includes(n._str_Name))c.Global.GetInstance().SetGoodsQuantity(n._str_Name,1),(u=(s=this._dic_node_SellItem[n._str_Name]).getComponent(l.default))._num_Number=c.Global.GetInstance().GetGoodsQuantity(u._str_Name),s.children[2].getComponent(cc.Label).string=u._num_Number.toString();else this.CreatorEquipItem(n._str_Name,1,this._node_EquipItemLayout,!1),c.Global.GetInstance().SetGoodsQuantity(n._str_Name,1);var o=n._str_Name.substr(0,n._str_Name.length-1);c.Global.GetInstance().SetEquipData(o,"Null"),e.destroy()}else{o=n._str_Name.substr(0,n._str_Name.length-1);var a=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,o);if("1"==n._str_Type)a=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,o);else{var i=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,"Hp1"),r=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,"Hp2");i.childrenCount<1?(a=i,o="Hp1"):(r.childrenCount,a=r,o="Hp2")}if(a.childrenCount>0){var s,u,d=a.children[0].getComponent(l.default);if(n._str_Name==d._str_Name)return;this._arr_str_SellName.includes(d._str_Name)?(c.Global.GetInstance().SetGoodsQuantity(d._str_Name,1),(u=(s=this._dic_node_SellItem[d._str_Name]).getComponent(l.default))._num_Number=c.Global.GetInstance().GetGoodsQuantity(u._str_Name),s.children[2].getComponent(cc.Label).string=u._num_Number.toString()):(this.CreatorEquipItem(d._str_Name,1,this._node_EquipItemLayout,!1),c.Global.GetInstance().SetGoodsQuantity(d._str_Name,1)),d.node.destroy(),n._num_Number-=1,t.string=n._num_Number.toString(),c.Global.GetInstance().SetGoodsQuantity(n._str_Name,-1),n._num_Number<=0&&(this._node_EquipOrRemove.off(cc.Node.EventType.TOUCH_END),this.RemoveSellName(n._str_Name),this._dic_node_SellItem[n._str_Name]=null,e.destroy()),this.CreatorEquipItem(n._str_Name,1,a,!0),c.Global.GetInstance().SetEquipData(o,n._str_Name)}else n._num_Number-=1,t.string=n._num_Number.toString(),c.Global.GetInstance().SetGoodsQuantity(n._str_Name,-1),n._num_Number<=0&&(this._node_EquipOrRemove.off(cc.Node.EventType.TOUCH_END),this.RemoveSellName(n._str_Name),this._dic_node_SellItem[n._str_Name]=null,e.destroy()),this.CreatorEquipItem(n._str_Name,1,a,!0),c.Global.GetInstance().SetEquipData(o,n._str_Name)}}},t.prototype.EquipGoods=function(e){var t=e.substr(0,e.length-1),n=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,t);if("1"==c.Global.GetInstance().GetGoodsData(e).Type)n=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,t);else{var o=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,"Hp1"),a=c.Global.GetInstance().FindNodeRecursively(this._node_EquipBottom,"Hp2");n=o.childrenCount<1?o:(a.childrenCount,a)}this.CreatorEquipItem(e,1,n,!0)},t.prototype.RemoveSellName=function(e){var t=this._arr_str_SellName.indexOf(e);this._arr_str_SellName.splice(t,1)},t.prototype.SetSelectTips=function(e){void 0==this._node_SelectTips?(this._node_SelectTips=e,this._node_SelectTips.active=!0):(this._node_SelectTips.active=!1,this._node_SelectTips=e,this._node_SelectTips.active=!0)},t=a([d],t)}(i.Base_Panel));n.default=p,cc._RF.pop()},{"../GoodsItem":"GoodsItem","../manager/AudioManager":"AudioManager","../manager/Global":"Global","../manager/ResourceManager":"ResourceManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"eb611OSOcxFtaMLeX/CtzEO","EventManager");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(e){function t(){return e.call(this)||this}return o(t,e),t.getInstance=function(){return t.instance},t.emit=function(e,n){t.getInstance()._emit(e,n)},t.on=function(e,n,o,a){t.getInstance()._on(e,o,n,a)},t.prototype._on=function(t,n,o,a){e.prototype.on.call(this,t,n,o,a)},t.prototype._emit=function(t,n){var o=new cc.Event.EventCustom(t,!0);o.setUserData(n),e.prototype.dispatchEvent.call(this,o)},t.instance=new t,t}(cc.EventTarget);n.default=a,cc._RF.pop()},{}],GameOverPanel:[function(e,t,n){"use strict";cc._RF.push(t,"b5cd33uHnBMJKxyvlJvUoHL","GameOverPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=e("../manager/ResourceManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t._node_WinBG=void 0,t._node_LostBG=void 0,t._node_GetItemLayout=void 0,t._lab_GameGoldGet=void 0,t._str_GetItemName=["Hp1","Hp1","Hp1","weapon_1","jia01","dun01","jie01","Hp1","Hp1","Hp1"],t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._node_WinBG=s.Global.GetInstance().FindNodeRecursively(this.node,"WinBG"),this._node_LostBG=s.Global.GetInstance().FindNodeRecursively(this.node,"LostBG"),this._node_GetItemLayout=s.Global.GetInstance().FindNodeRecursively(this.node,"GetItemLayout"),this._lab_GameGoldGet=s.Global.GetInstance().FindNodeRecursively(this.node,"GameGoldGet_lab").getComponent(cc.Label),this.AddBtnClickEvent("ReturnBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(t){e.prototype.OnEnter.call(this,t);for(var n=0;n<this._node_GetItemLayout.childrenCount;n++)this._node_GetItemLayout.children[n].destroy();"Win"==t&&(this._node_WinBG.active=!0,this._node_LostBG.active=!1,s.Global.GetInstance().GameWin(),this.GetReward()),"Lost"==t&&(this._node_WinBG.active=!1,this._node_LostBG.active=!0,this._lab_GameGoldGet.string="0")},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.GetReward=function(){for(var e=s.Global.GetInstance().Random_int(1,3),t=0;t<e;t++){var n=this._str_GetItemName[s.Global.GetInstance().Random_int(0,this._str_GetItemName.length-1)];this.CreatorEquipItem(n,this._node_GetItemLayout)}var o=5*s.Global.GetInstance()._num_CurrentSelectLevel+s.Global.GetInstance().Random_int(5,5*s.Global.GetInstance()._num_CurrentSelectLevel);this._lab_GameGoldGet.string=o.toString(),s.Global.GetInstance().SetGameGold(o)},t.prototype.CreatorEquipItem=function(e,t){var n=cc.instantiate(c.ResourceManager.getInstance().getRes("prefab/otherPre/GoodsItem",cc.Prefab)),o="sprite/"+e;n.children[0].getComponent(cc.Sprite).spriteFrame=c.ResourceManager.getInstance().getRes(o,cc.SpriteFrame),n.children[1].active=!0,n.children[2].active=!1,n.setParent(t),n.setPosition(cc.v3(0,0,0)),s.Global.GetInstance().SetGoodsQuantity(e,1)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"ReturnBtn":r.default.getInstance().ShowPanel("LevelPanel",null,!0);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel")}},t=a([_],t)}(i.Base_Panel));n.default=u,cc._RF.pop()},{"../manager/Global":"Global","../manager/ResourceManager":"ResourceManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],GameRoot:[function(e,t,n){"use strict";cc._RF.push(t,"4da5cw+ho1L/40RweOcF+bV","GameRoot");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./manager/Global"),r=e("./manager/AudioManager"),s=e("./manager/ResourceManager"),c=e("./manager/UIManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._bool_loadingComplete=!0,t._node_GetHurtHint=null,t._tween_UpPos1=cc.tween().to(1,{position:cc.v2(0,1500)},{easing:"quadOut"}),t._tween_UpPos2=cc.tween().to(1,{position:cc.v2(0,311.789)},{easing:"backIn"}),t._tween_DownPos1=cc.tween().to(1,{position:cc.v2(0,-1500)},{easing:"quadOut"}),t._tween_DownPos2=cc.tween().to(1,{position:cc.v2(0,-468.652)},{easing:"backIn"}),t._dic_Test={},t}var n;return o(t,e),n=t,t.prototype.onLoad=function(){n._instance=this,i.Global.GetInstance().InitGameData(),i.Global.GetInstance().Resize_screen(),this._node_GetHurtHint=this.node.getChildByName("GetHurtHint"),this._node_Up=this.node.getChildByName("Up"),this._node_Down=this.node.getChildByName("Down"),console.log(this._dic_Test["\u5d14\u5b66\u658c"]),this._dic_Test["\u5d14\u5b66\u658c"]="18",this._dic_Test.MJ="16",console.log(this._dic_Test["\u5d14\u5b66\u658c"]),c.default.getInstance().ShowPanel("StartPanel"),this._node_Down.getComponent(cc.Sprite).spriteFrame=s.ResourceManager.getInstance().getRes("sprite/c1",cc.SpriteFrame)},t.prototype.GetHurtHint=function(){cc.tween(this._node_GetHurtHint).to(.1,{opacity:255}).delay(.1).to(.1,{opacity:0}).start()},t.prototype.SetAudioBtnSprite=function(e){r.AudioManager.getInstance().bool_PauseAudio},t.prototype.LoadingEffect=function(e,t){this._bool_loadingComplete&&(this._bool_loadingComplete=!1,cc.tween(this._node_Down).then(this._tween_DownPos2).delay(.5).start(),cc.tween(this._node_Up).then(this._tween_UpPos2).delay(.5).call(function(){}).start())},t.prototype.preloadRes=function(e){s.ResourceManager.getInstance().loadResDirAsyc(e,function(e,t,n){},function(e,t,n){if(e)console.warn("res load failed!");else{for(var o=0;o<t.length;o++)cc.log("-------------Loading perfabe----------------"),cc.log(t[o].name);cc.log("-------------OKKKKKKKKKKKKKKKKKKK----------------"),c.default.getInstance().ShowPanel("StartPanel")}})},t=n=a([_],t)}(cc.Component));n.default=u,cc._RF.pop()},{"./manager/AudioManager":"AudioManager","./manager/Global":"Global","./manager/ResourceManager":"ResourceManager","./manager/UIManager":"UIManager"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"cff67vRQANOg44SNzLbkhEv","Global"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ResourceManager"),a=function(){function e(){this.bool_IsTouch=!1,this._num_Hightestlevel=12,this.num_GameTimeing=0,this._enum_GameState=void 0,this.num_CurrentSelectHeroIndex=void 0,this._dic_GoodsData={},this._dic_GoodsNumber={},this._arr_AllGoodsName=[],this._dic_EquipData={},this._arr_str_EquipDataKey=["weapon_","jia0","dun0","jie0","Hp1","Hp2"]}return e.prototype.SetEquipData=function(e,t){this._dic_EquipData[e]=t,this.SavaData("EquipData",this._dic_EquipData)},e.GetInstance=function(){return e._instance||(e._instance=new e),this._instance},e.prototype.InitGameData=function(){if(cc.debug.setDisplayStats(!1),null==e.GetInstance().ReadData("WYBF")){this.SavaData("WYBF",1),this._num_GameGold=80,this._num_CurrentLevel=1,this._num_HighRecord=0,this._num_CurrentRecord=0,this._num_CumulativeRecord=0,this.SavaData("GameGold",this._num_GameGold),this.SavaData("CumulativeRecord",this._num_CumulativeRecord),this.SavaData("CurrentLevel",this._num_CurrentLevel),this.SavaData("CurrentRecord",this._num_CurrentRecord),this.SavaData("HighRecord",this._num_HighRecord);for(var t=o.ResourceManager.getInstance().getRes("json/GoodsData",cc.JsonAsset).json,n=0;n<t.length;n++)this._dic_GoodsData[t[n].Name]=t[n],this._dic_GoodsNumber[t[n].Name]=0,this._arr_AllGoodsName.push(t[n].Name);for(var a=0;a<this._arr_str_EquipDataKey.length;a++)this._dic_EquipData[this._arr_str_EquipDataKey[a]]="Null";this.SavaData("GoodsDATA",this._dic_GoodsData),this.SavaData("GoodsNumber",this._dic_GoodsNumber),this.SavaData("AllGoodsName",this._arr_AllGoodsName),this.SavaData("EquipData",this._dic_EquipData),this.SetGoodsQuantity("weapon_1",1)}else cc.log("\u5df2\u7ecf\u6709\u6570\u636e-"),this._num_GameGold=this.ReadData("GameGold"),this._num_CurrentLevel=this.ReadData("CurrentLevel"),this._num_HighRecord=this.ReadData("HighRecord"),this._num_CurrentRecord=this.ReadData("CurrentRecord"),this._num_CumulativeRecord=this.ReadData("CumulativeRecord"),this._dic_GoodsData=this.ReadData("GoodsDATA"),this._dic_GoodsNumber=this.ReadData("GoodsNumber"),this._arr_AllGoodsName=this.ReadData("AllGoodsName"),this._dic_EquipData=this.ReadData("EquipData")},e.prototype.SetGameGold=function(e){return!(this._num_GameGold+e<0)&&(this._num_GameGold+=e,this.SavaData("GameGold",this._num_GameGold),!0)},e.prototype.GetGoodsData=function(e){if(this._dic_GoodsData[e])return this._dic_GoodsData[e]},e.prototype.GetGoodsQuantity=function(e){if(this._dic_GoodsNumber[e])return this._dic_GoodsNumber[e]},e.prototype.SetGoodsQuantity=function(e,t){var n=this._dic_GoodsNumber[e];return cc.log("key---"+e+"\u5f53\u524d\u9700\u8981\u4fee\u6539\u7684\u6570\u91cf\u662f--"+n+"---\u589e\u52a0\u540e\u7684\u6570\u91cf---"+(n+t)),n+t>=0?(n+=t,this._dic_GoodsNumber[e]=n,this.SavaData("GoodsNumber",this._dic_GoodsNumber),cc.log("\u6570\u636e\u4fee\u6539\u6210\u529f--"+e+"--\u7684\u6570\u91cf="+n),!0):(cc.error("--------------Cannot be negative--------------------"),!1)},e.prototype.GameWin=function(){this._num_CurrentSelectLevel==this._num_CurrentLevel&&this._num_CurrentSelectLevel<this._num_Hightestlevel&&(this._num_CurrentLevel+=1,this.SavaData("CurrentLevel",this._num_CurrentLevel))},e.prototype.GameOverTimeCalculation=function(e){this._num_CurrentRecord=e,this._num_CumulativeRecord+=e,this.SavaData("CumulativeRecord",this._num_CumulativeRecord),e>this._num_HighRecord&&(this._num_HighRecord=e,this.SavaData("HighRecord",this._num_HighRecord))},e.prototype.FormatTime=function(e){var t=this.Rounding(e/3600),n=(t<10?"0"+t:t).toString(),o=this.Rounding((e-3600*t)/60),a=o<10?"0"+o:o.toString(),i=this.Rounding(e-3600*t-60*o);return n+":"+a+":"+(i<10?"0"+i:i.toString())},e.prototype.Rounding=function(e){return Math.floor(e)},e.prototype.Resize_screen=function(){var e=cc.find("Canvas").getComponent(cc.Canvas);this._size_DesignResolution||(this._size_DesignResolution=e.designResolution);var t=this._size_DesignResolution,n=cc.view.getFrameSize(),o=n.width,a=n.height,i=o,r=a;o/a>t.width/t.height?i=(r=t.height)*o/a:r=a/o*(i=t.width),e.designResolution=cc.size(i,r),e.node.width=i,e.node.height=r,e.node.emit("resize")},e.prototype.FindNodeRecursively=function(e,t){if(e.name==t)return e;for(var n=0;n<e.childrenCount;n++){var o=this.FindNodeRecursively(e.children[n],t);if(null!=o)return o}},e.prototype.Random_int=function(e,t){var n=e+Math.random()*(t-e+1);return(n=Math.floor(n))>t&&(n=t),n},e.getNumberSuffixByString=function(e){for(var t=e.length,n=-1,o=1;o<t;++o){var a=Number(e.substr(-o));if(!a&&0!=a)return n;n=a}return n},e.prototype.SavaData=function(e,t){cc.sys.localStorage.setItem(e,JSON.stringify(t))},e.prototype.ReadData=function(e){return JSON.parse(cc.sys.localStorage.getItem(e))},e.prototype.RemoveData=function(e){cc.sys.localStorage.removeItem(e)},e.prototype.RemoveAllData=function(){cc.sys.localStorage.clear()},e}();n.Global=a,function(e){e[e.run=0]="run",e[e.pause=1]="pause",e[e.over=2]="over"}(n.GameState||(n.GameState={})),cc._RF.pop()},{"./ResourceManager":"ResourceManager"}],GoodsData_Model:[function(e,t,n){"use strict";cc._RF.push(t,"5a933CxeF9Hoq98j/JcD/tM","GoodsData_Model");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e=o([i],e)}());n.default=r,cc._RF.pop()},{}],GoodsItem:[function(e,t,n){"use strict";cc._RF.push(t,"05087Jk3OlBopCXC6G1+1Kj","GoodsItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator,r=i.ccclass,s=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._str_Name=void 0,t._str_Describe=void 0,t._str_Type=void 0,t._str_DescribePro=void 0,t._num_Buy=void 0,t._num_Sell=void 0,t._num_Att=void 0,t._num_Def=void 0,t._num_Hp=void 0,t._num_Mp=void 0,t._num_Heal=void 0,t._num_Number=void 0,t._bool_IsBuy=void 0,t}return o(t,e),t.prototype.InitGoodsItem=function(e,t,n,o,a,i,r,s,c,l,_,u,d){this._str_Name=e,this._str_Describe=t,this._str_Type=n,this._num_Buy=o,this._num_Sell=a,this._num_Att=i,this._num_Def=r,this._num_Hp=s,this._num_Mp=c,this._num_Heal=l,this._num_Number=_,this._bool_IsBuy=u,this._str_DescribePro=d},t=a([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],GuidePanel:[function(e,t,n){"use strict";cc._RF.push(t,"32456ihRCZMZrivBQia9guf","GuidePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=e("../manager/ResourceManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t._spr_Guide=void 0,t._num_GuideIndex=1,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._spr_Guide=s.Global.GetInstance().FindNodeRecursively(this.node,"Guide").getComponent(cc.Sprite),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("RightBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("LeftBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){this._num_GuideIndex=1},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":r.default.getInstance().ClosePanel(this.node);break;case"RightBtn":this.SetGuide(1);break;case"LeftBtn":this.SetGuide(-1)}},t.prototype.SetGuide=function(e){this._num_GuideIndex+=e,this._num_GuideIndex=this._num_GuideIndex>5?1:this._num_GuideIndex,this._num_GuideIndex=this._num_GuideIndex<1?5:this._num_GuideIndex,cc.log(this._num_GuideIndex+""+this._spr_Guide.node.name+"-Guide_"+this._num_GuideIndex),this._spr_Guide.spriteFrame=c.ResourceManager.getInstance().getRes("sprite/Guide_"+this._num_GuideIndex,cc.SpriteFrame)},t=a([_],t)}(i.Base_Panel));n.default=u,cc._RF.pop()},{"../manager/Global":"Global","../manager/ResourceManager":"ResourceManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],HeroRole:[function(e,t,n){"use strict";cc._RF.push(t,"edd5dD00BFCH6+9InU6UmJm","HeroRole");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Role"),r=e("../manager/EventManager"),s=e("../manager/AudioManager"),c=cc._decorator,l=c.ccclass,_=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.BeHurt=function(t){return e.prototype.BeHurt.call(this,t),this.node.name.includes("1")&&s.AudioManager.getInstance().playEffect("ManBehurt"),this.node.name.includes("2")&&s.AudioManager.getInstance().playEffect("WomanBehurt"),this._bool_IsDie},t.prototype.MouseDownEvent=function(t){e.prototype.MouseDownEvent.call(this,t),r.default.emit("MouseDownHero",t.target)},t.prototype.DieCallBack=function(){e.prototype.DieCallBack.call(this),r.default.emit("HeroDie",this.node)},t=a([l],t)}(i.default));n.default=_,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/EventManager":"EventManager","./Base_Role":"Base_Role"}],LevelData_Model:[function(e,t,n){"use strict";cc._RF.push(t,"e149eUuGl9P96U8fLZMIHNb","LevelData_Model");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,r=(a.property,function(){function e(){}return e=o([i],e)}());n.default=r,cc._RF.pop()},{}],LevelPanel:[function(e,t,n){"use strict";cc._RF.push(t,"a2647N/PflP0LAri4nXvHSY","LevelPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=e("../manager/AudioManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Full,t._node_LevelItemParent=void 0,t._node_CurrentSelectItem=void 0,t._node_MapDecorationParent=void 0,t}return o(t,e),t.prototype.OnEnter=function(e){"NO"!=s.Global.GetInstance().ReadData("FirstEntry")&&(s.Global.GetInstance().SavaData("FirstEntry","NO"),r.default.getInstance().ShowPanel("GuidePanel"));for(var t=0;t<this._node_LevelItemParent.childrenCount;t++){var n=t+1,o=this._node_LevelItemParent.children[t];o.name=(t+1).toString(),s.Global.GetInstance()._num_CurrentLevel>=n?(o.children[0].color=cc.color(255,255,255,255),this.AddBtnClickEvent(o.name,this._node_LevelItemParent,this.LevelItemOnClick.bind(this))):(o.children[0].color=cc.color(120,120,120,255),this.AddBtnClickEvent(o.name,this._node_LevelItemParent,this.LevelItemLockOnClick.bind(this),!1,"Null"))}this.SetCurrentLevel(this._node_LevelItemParent.children[s.Global.GetInstance()._num_CurrentLevel-1])},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this._node_LevelItemParent=s.Global.GetInstance().FindNodeRecursively(this.node,"LevelItemParent"),this._node_MapDecorationParent=s.Global.GetInstance().FindNodeRecursively(this.node,"MapDecoration"),this.AddBtnClickEvent("BackBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("StoreBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("EquipBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("BattleBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("GuideBtn",this.node,this.AddBtnOnClick.bind(this),!0);for(var n=function(e){var n=o._node_MapDecorationParent.children[e];n.on(cc.Node.EventType.TOUCH_END,function(){t.MapDecorationItemOnClick(n.getComponent(cc.Button))})},o=this,a=0;a<this._node_MapDecorationParent.childrenCount;a++)n(a)},t.prototype.LevelItemOnClick=function(e){this.SetCurrentLevel(e.node,!0)},t.prototype.LevelItemLockOnClick=function(e){r.default.getInstance().NotificationTips("Not currently unlocked"),c.AudioManager.getInstance().playEffect("Warning"),cc.tween(e.node).to(.5,{scale:.8}).call(function(){cc.tween(e.node).to(.2,{scale:.6}).start()}).start()},t.prototype.MapDecorationItemOnClick=function(e){e.node.name.includes("Stone")&&r.default.getInstance().NotificationTips("Ore With Powerful Magic"),e.node.name.includes("StoneFire")&&r.default.getInstance().NotificationTips("Burning Magic Flame"),e.node.name.includes("Role")&&r.default.getInstance().NotificationTips("Master Who Is Defending Against Evil Forces"),e.node.name.includes("Tree")&&r.default.getInstance().NotificationTips("The Tree Of Life Occupied By Evil Forces")},t.prototype.SetCurrentLevel=function(e,t){void 0!=this._node_CurrentSelectItem?(cc.tween(this._node_CurrentSelectItem).to(.5,{scale:.6}).start(),this._node_CurrentSelectItem.children[0].getComponent(dragonBones.ArmatureDisplay).timeScale=1,this._node_CurrentSelectItem=e,cc.tween(this._node_CurrentSelectItem).to(.5,{scale:.8}).start(),this._node_CurrentSelectItem.children[0].getComponent(dragonBones.ArmatureDisplay).timeScale=3):(this._node_CurrentSelectItem=e,this._node_CurrentSelectItem.setScale(cc.v2(.8,.8)),this._node_CurrentSelectItem.children[0].getComponent(dragonBones.ArmatureDisplay).timeScale=3),s.Global.GetInstance()._num_CurrentSelectLevel=parseInt(e.name),t&&c.AudioManager.getInstance().playEffect("SelectLevel")},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"BackBtn":r.default.getInstance().ShowPanel("SelectPanel",null,!0);break;case"StoreBtn":r.default.getInstance().ShowPanel("StorePanel");break;case"EquipBtn":r.default.getInstance().ShowPanel("EquipPanel");break;case"GuideBtn":r.default.getInstance().ShowPanel("GuidePanel");break;case"BattleBtn":r.default.getInstance().ShowPanel("BattlePanel",null,!0)}},t=a([_],t)}(i.Base_Panel));n.default=u,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/Global":"Global","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],MonsterRole:[function(e,t,n){"use strict";cc._RF.push(t,"f6682jczZVFebM2cdp+3wze","MonsterRole");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Role"),r=e("../manager/EventManager"),s=e("../manager/AudioManager"),c=cc._decorator,l=c.ccclass,_=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.MouseDownEvent=function(t){e.prototype.MouseDownEvent.call(this,t),r.default.emit("MouseDownMonster",t.target)},t.prototype.PlayDie=function(){e.prototype.PlayDie.call(this),this.name.includes("Box")?s.AudioManager.getInstance().playEffect("BoxOpen"):s.AudioManager.getInstance().playEffect("MonsterDie")},t.prototype.DieCallBack=function(){e.prototype.DieCallBack.call(this),r.default.emit("MonsterDie",this.node)},t=a([l],t)}(i.default));n.default=_,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/EventManager":"EventManager","./Base_Role":"Base_Role"}],Panel:[function(e,t,n){"use strict";cc._RF.push(t,"933dbScdkxJJrow0uSMo1kE","Panel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("SettingBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":r.default.getInstance().ClosePanel(this.node);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel")}},t=a([c],t)}(i.Base_Panel));n.default=l,cc._RF.pop()},{"../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],PausePanel:[function(e,t,n){"use strict";cc._RF.push(t,"0a36e82ABdN0ZA8an4JV1dG","PausePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=cc._decorator,l=c.ccclass,_=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("ContinueBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("SettingBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("ExitBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){s.Global.GetInstance()._enum_GameState=s.GameState.pause},t.prototype.OnExit=function(){e.prototype.OnExit.call(this),s.Global.GetInstance()._enum_GameState=s.GameState.run},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"ContinueBtn":r.default.getInstance().ClosePanel(this.node);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel");break;case"ExitBtn":r.default.getInstance().ShowPanel("LevelPanel",null,!0)}},t=a([l],t)}(i.Base_Panel));n.default=_,cc._RF.pop()},{"../manager/Global":"Global","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],ResourceLoading:[function(e,t,n){"use strict";cc._RF.push(t,"fe6efckR5FMf6O+NuzybAg7","ResourceLoading");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./manager/ResourceManager"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._ResourcesURl=["prefab/","sprite/","json/"],t._num_Total=0,t._num_LoadIndex=0,t}return o(t,e),t.prototype.start=function(){this._num_Total=this._ResourcesURl.length,this._num_LoadIndex=0,this.ResourcesloadRes(this._ResourcesURl[this._num_LoadIndex])},t.prototype.ResourcesloadRes=function(e){this._num_LoadIndex+=1,i.ResourceManager.getInstance().loadResDirAsyc(e,this.LoadProgress.bind(this),this.LoadComplete.bind(this))},t.prototype.LoadProgress=function(e,t,n){},t.prototype.LoadComplete=function(e,t,n){if(e){console.warn("res load failed!-"+n.length);for(var o=0;o<n.length;o++)cc.error("errer--"+n[o])}else{for(o=0;o<t.length;o++)cc.log(t[o].name);this._num_LoadIndex>=this._num_Total?(cc.log("\u5b8c\u6210\u8df3\u8f6c"),cc.director.loadScene("main")):(cc.log("----------\u5f53\u524d\u52a0\u8f7d\u7684\u6587\u4ef6\u6570-------------"+this._num_LoadIndex+"---\u603b\u6587\u4ef6\u6570---"+this._num_Total),this.ResourcesloadRes(this._ResourcesURl[this._num_LoadIndex]))}},t=a([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"./manager/ResourceManager":"ResourceManager"}],ResourceManager:[function(e,t,n){"use strict";cc._RF.push(t,"bf4e2QCQvNLQJInrc/oD4R9","ResourceManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.getInstance=function(){return e.instance},e.prototype.LoadPanelPerfab_async=function(t,n){e.getInstance().loadResAsyc("prefab/panelPre/"+t,cc.Prefab,n)},e.prototype.LoadJson_async=function(t,n){e.getInstance().loadResAsyc("json/"+t,cc.JsonAsset,n)},e.prototype.SetSprite_async=function(t,n){var o=t.getComponent(cc.Sprite);o&&e.getInstance().loadResAsyc("sprite/"+n,cc.SpriteFrame,function(e,t){if(t)try{1==t.isValid&&(o.spriteFrame=t)}catch(e){cc.error("Loading "+n+"-failed")}else console.warn("load SpriteFrame "+n+" failed")})},e.prototype.loadResDirAsyc=function(e,t,n){cc.loader.loadResDir(e,function(e,n,o){t&&t(e,n,o)},function(e,t,o){n&&n(e,t,o)})},e.prototype.releaseResDir=function(e,t){cc.loader.releaseResDir(e,t)},e.prototype.loadResAsyc=function(e,t,n,o){cc.loader.loadRes(e,t,function(e,t,n){o&&o(e,t,n)},function(t,o){n&&(t&&cc.warn("load res fail, path="+e+", err="+t),n(t,o))})},e.prototype.releaseRes=function(e){cc.loader.releaseRes(e)},e.prototype.getRes=function(e,t){var n=cc.loader.getRes(e,t);return n||cc.warn("preload res path: "+e+" not exist"),n},e.instance=new e,e}();n.ResourceManager=o,cc._RF.pop()},{}],SelectPanel:[function(e,t,n){"use strict";cc._RF.push(t,"24301JCpaFKF7nB/60rGGoV","SelectPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=e("../manager/AudioManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Full,t._node_HeroParent=void 0,t._node_CurrentSelectHero=void 0,t._node_SelectTips=void 0,t._num_CurrentSelectHeroIndex=void 0,t._bool_IsExchange=!1,t}return o(t,e),t.prototype.OnEnter=function(e){cc.log(e)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("BackBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("NextBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("SettingBtn",this.node,this.AddBtnOnClick.bind(this),!0),this._node_SelectTips=s.Global.GetInstance().FindNodeRecursively(this.node,"SelectTips"),this._node_HeroParent=s.Global.GetInstance().FindNodeRecursively(this.node,"HeroParent"),this.SetCurrentSelectHero(this._node_HeroParent.children[this._node_HeroParent.childrenCount-1]);for(var t=0;t<this._node_HeroParent.childrenCount;t++){var n=this._node_HeroParent.children[t];n.on(cc.Node.EventType.TOUCH_END,this.SelectHeroClick.bind(this));for(var o=0;o<n.childrenCount;o++)"Hero_1_Parent"==n.name||"Hero_2_Parent"==n.name?n.children[o].color=cc.color(255,255,255,255):n.children[o].color=cc.color(100,100,100,255)}},t.prototype.SelectHeroClick=function(e){var t=this;e.stopPropagation();var n=e.target;if(!this._bool_IsExchange&&this._node_CurrentSelectHero!=n){this._bool_IsExchange=!0;var o=this._node_CurrentSelectHero.position,a=n.position,i=this._node_CurrentSelectHero.getSiblingIndex(),r=n.getSiblingIndex();this._node_CurrentSelectHero.setSiblingIndex(r),n.setSiblingIndex(i),this._node_SelectTips.setParent(n),this._node_SelectTips.setPosition(cc.v2(0,0)),cc.tween(this._node_CurrentSelectHero).to(.5,{position:a}).start(),cc.tween(n).to(.5,{position:o}).call(function(){t._bool_IsExchange=!1}).start(),this.SetCurrentSelectHero(n,!0)}},t.prototype.SetCurrentSelectHero=function(e,t){this._node_CurrentSelectHero=e;var n=this._node_CurrentSelectHero.children[1].name.split("_");s.Global.GetInstance().num_CurrentSelectHeroIndex=parseInt(n[1]),t&&c.AudioManager.getInstance().playEffect("SelectHero")},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"BackBtn":r.default.getInstance().ShowPanel("StartPanel",null,!0);break;case"NextBtn":1==s.Global.GetInstance().num_CurrentSelectHeroIndex||2==s.Global.GetInstance().num_CurrentSelectHeroIndex?r.default.getInstance().ShowPanel("LevelPanel",null,!0):r.default.getInstance().NotificationTips("The current character is not unlocked");break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel")}},t=a([_],t)}(i.Base_Panel));n.default=u,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/Global":"Global","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],SettingPanel:[function(e,t,n){"use strict";cc._RF.push(t,"7eb66yb5NJAY6TNh7SLSxT3","SettingPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/Global"),c=e("../manager/AudioManager"),l=cc._decorator,_=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t._slider_MusicVolume=null,t._slider_EffectsVolume=null,t._ProBar_Music=null,t._ProBar_Effect=null,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._slider_EffectsVolume=s.Global.GetInstance().FindNodeRecursively(this.node,"EffectsVolumeSlider").getComponent(cc.Slider),this._slider_MusicVolume=s.Global.GetInstance().FindNodeRecursively(this.node,"MusicVolumeSlider").getComponent(cc.Slider),this._ProBar_Effect=s.Global.GetInstance().FindNodeRecursively(this.node,"EffectsProgressBar").getComponent(cc.ProgressBar),this._ProBar_Music=s.Global.GetInstance().FindNodeRecursively(this.node,"MusicProgressBar").getComponent(cc.ProgressBar),this._slider_EffectsVolume.node.on("slide",this.SliderCallBack,this),this._slider_MusicVolume.node.on("slide",this.SliderCallBack,this),this.AddBtnClickEvent("BackBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){this.SetProgress(this._slider_MusicVolume,this._ProBar_Music),this.SetProgress(this._slider_EffectsVolume,this._ProBar_Effect)},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"BackBtn":r.default.getInstance().ClosePanel(this.node)}},t.prototype.SliderCallBack=function(e){switch(e.node.name){case"EffectsVolumeSlider":c.AudioManager.getInstance().effectVolume=e.progress,this._ProBar_Effect.progress=e.progress;break;case"MusicVolumeSlider":c.AudioManager.getInstance().musicVolume=e.progress,this._ProBar_Music.progress=e.progress}},t.prototype.SetProgress=function(e,t){-1!=e.node.name.search("Music")?(e.progress=c.AudioManager.getInstance().musicVolume,t.progress=e.progress):(e.progress=c.AudioManager.getInstance().effectVolume,t.progress=e.progress)},t=a([_],t)}(i.Base_Panel));n.default=u,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/Global":"Global","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],SkillPanel:[function(e,t,n){"use strict";cc._RF.push(t,"1d584ZbyZFEApBW0owoazir","SkillPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("SettingBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":r.default.getInstance().ClosePanel(this.node);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel")}},t=a([c],t)}(i.Base_Panel));n.default=l,cc._RF.pop()},{"../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],StartPanel:[function(e,t,n){"use strict";cc._RF.push(t,"18694+iYlNCMrOovGNDG449","StartPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/UIManager"),s=e("../manager/AudioManager"),c=cc._decorator,l=c.ccclass,_=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Full,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("StartBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("SettingBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("GuideBtn",this.node,this.AddBtnOnClick.bind(this),!0),this.AddBtnClickEvent("AboutBtn",this.node,this.AddBtnOnClick.bind(this),!0)},t.prototype.OnEnter=function(e){s.AudioManager.getInstance().playMusic("BGM")},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"StartBtn":r.default.getInstance().ShowPanel("SelectPanel","\u6253\u5f00\u9762\u677f\u540e\u4f1a\u4f20\u9001\u8fd9\u4e2a\u6570\u636e",!0);break;case"SettingBtn":r.default.getInstance().ShowPanel("SettingPanel");break;case"GuideBtn":r.default.getInstance().ShowPanel("GuidePanel");break;case"AboutBtn":r.default.getInstance().ShowPanel("AboutPanel")}},t=a([l],t)}(i.Base_Panel));n.default=_,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],StorePanel:[function(e,t,n){"use strict";cc._RF.push(t,"5b782IkwJhM5os9jteOV4fq","StorePanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./Base_Panel"),r=e("../manager/AudioManager"),s=e("../manager/UIManager"),c=e("../manager/ResourceManager"),l=e("../manager/Global"),_=e("../GoodsItem"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enum_PanelType=i.PanelType.Popup,t._node_BuyItemLayout=void 0,t._node_SellItemLayout=void 0,t._node_SelectTips=void 0,t._node_BuyOrSellBtn=void 0,t._lab_BuyOrSell=void 0,t._lab_GameGold=void 0,t._lab_Damage=void 0,t._lab_Health=void 0,t._lab_Defence=void 0,t._lab_Class=void 0,t._lab_Mana=void 0,t._lab_Heal=void 0,t._lab_Name=void 0,t._lab_Describe=void 0,t._lab_Buy=void 0,t._lab_Sell=void 0,t._dic_node_SellItem={},t._arr_str_SellName=[],t._bool_FirstOpen=!0,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.AddBtnClickEvent("CloseBtn",this.node,this.AddBtnOnClick.bind(this),!0),this._node_BuyItemLayout=l.Global.GetInstance().FindNodeRecursively(this.node,"BuyItemLayout"),this._node_SellItemLayout=l.Global.GetInstance().FindNodeRecursively(this.node,"SellItemLayout"),this._node_BuyOrSellBtn=l.Global.GetInstance().FindNodeRecursively(this.node,"BuyOrSellBtn"),this._lab_BuyOrSell=l.Global.GetInstance().FindNodeRecursively(this._node_BuyOrSellBtn,"BuyOrSellLab").getComponent(cc.Label),this._lab_GameGold=l.Global.GetInstance().FindNodeRecursively(this.node,"GameGoldLab").getComponent(cc.Label),this._lab_Damage=l.Global.GetInstance().FindNodeRecursively(this.node,"Damage_lab").getComponent(cc.Label),this._lab_Health=l.Global.GetInstance().FindNodeRecursively(this.node,"Health_lab").getComponent(cc.Label),this._lab_Defence=l.Global.GetInstance().FindNodeRecursively(this.node,"Defence_lab").getComponent(cc.Label),this._lab_Class=l.Global.GetInstance().FindNodeRecursively(this.node,"Class_lab").getComponent(cc.Label),this._lab_Mana=l.Global.GetInstance().FindNodeRecursively(this.node,"Mana_lab").getComponent(cc.Label),this._lab_Heal=l.Global.GetInstance().FindNodeRecursively(this.node,"Heal_lab").getComponent(cc.Label),this._lab_Name=l.Global.GetInstance().FindNodeRecursively(this.node,"Name_lab").getComponent(cc.Label),this._lab_Describe=l.Global.GetInstance().FindNodeRecursively(this.node,"Describt_lab").getComponent(cc.Label),this._lab_Buy=l.Global.GetInstance().FindNodeRecursively(this.node,"Buy_lab").getComponent(cc.Label),this._lab_Sell=l.Global.GetInstance().FindNodeRecursively(this.node,"Sell_lab").getComponent(cc.Label),this.CreatorBuyItem("weapon_",6),this.CreatorBuyItem("jia0",6),this.CreatorBuyItem("dun0",6),this.CreatorBuyItem("jie0",6),this.CreatorBuyItem("Hp",2)},t.prototype.OnEnter=function(e){this.SetGoldShow(),this.TraverseCreatorItem()},t.prototype.OnExit=function(){e.prototype.OnExit.call(this)},t.prototype.RemoveSellName=function(e){var t=this._arr_str_SellName.indexOf(e);this._arr_str_SellName.splice(t,1)},t.prototype.TraverseCreatorItem=function(){this._dic_node_SellItem={},this._arr_str_SellName=[];for(var e=0;e<this._node_SellItemLayout.childrenCount;e++)this._node_SellItemLayout.children[e].destroy();for(e=0;e<l.Global.GetInstance()._arr_AllGoodsName.length;e++){var t=l.Global.GetInstance()._arr_AllGoodsName[e],n=l.Global.GetInstance().GetGoodsQuantity(t);n>0&&this.CreatorSellItem(t,n)}},t.prototype.CreatorSellItem=function(e,t){var n=this,o=cc.instantiate(c.ResourceManager.getInstance().getRes("prefab/otherPre/GoodsItem",cc.Prefab));this._arr_str_SellName.push(e);var a="sprite/"+e;o.children[0].getComponent(cc.Sprite).spriteFrame=c.ResourceManager.getInstance().getRes(a,cc.SpriteFrame),o.children[2].getComponent(cc.Label).string=t.toString(),o.setParent(this._node_SellItemLayout);var i=o.addComponent(_.default),r=l.Global.GetInstance().GetGoodsData(e);i.InitGoodsItem(r.Name,r.Describe,r.Type,r.Buy,r.Sell,r.Att,r.Def,r.Hp,r.Mp,r.Heal,t,!1,r.spare1),this._dic_node_SellItem[e]=o,o.off(cc.Node.EventType.TOUCH_END),o.on(cc.Node.EventType.TOUCH_END,function(){n.GoodsItemOnClick(o,!0)})},t.prototype.CreatorBuyItem=function(e,t){for(var n=this,o=function(t){var o=cc.instantiate(c.ResourceManager.getInstance().getRes("prefab/otherPre/GoodsItem",cc.Prefab)),i="sprite/"+e+t;o.name=e+t,o.children[0].getComponent(cc.Sprite).spriteFrame=c.ResourceManager.getInstance().getRes(i,cc.SpriteFrame),o.children[2].active=!1,o.setParent(a._node_BuyItemLayout);var r=o.addComponent(_.default),s=l.Global.GetInstance().GetGoodsData(o.name);r.InitGoodsItem(s.Name,s.Describe,s.Type,s.Buy,s.Sell,s.Att,s.Def,s.Hp,s.Mp,s.Heal,0,!0,s.spare1),o.on(cc.Node.EventType.TOUCH_END,function(){n.GoodsItemOnClick(o,!0)}),a._bool_FirstOpen&&(a._bool_FirstOpen=!1,a.GoodsItemOnClick(o,a._bool_FirstOpen))},a=this,i=1;i<=t;i++)o(i)},t.prototype.GoodsItemOnClick=function(e,t){var n=this;t&&r.AudioManager.getInstance().playEffect("Btn");var o=e.getComponent(_.default);this.SetSelectTips(e.children[1]),this._lab_Damage.string="Damage  :  "+o._num_Att.toString(),this._lab_Defence.string="Defence  :  "+o._num_Def.toString(),this._lab_Heal.string="Heal        :  "+o._num_Heal.toString(),this._lab_Health.string="Health    :  "+o._num_Hp.toString(),this._lab_Mana.string="Mana      :  "+o._num_Mp.toString(),this._lab_Sell.string="Sell         :  "+o._num_Sell.toString(),this._lab_Buy.string="Buy         :  "+o._num_Buy.toString(),this._lab_Describe.string=o._str_DescribePro.toString(),this._lab_Name.string=o._str_Describe.toString(),"1"==o._str_Type?this._lab_Class.string="Class       :  Equip":this._lab_Class.string="Class       :  Food",o._bool_IsBuy?this._lab_BuyOrSell.string="Buy":this._lab_BuyOrSell.string="Sell",this._node_BuyOrSellBtn.off(cc.Node.EventType.TOUCH_END),this._node_BuyOrSellBtn.on(cc.Node.EventType.TOUCH_END,function(){n.BuyOrSellOnClick(e)})},t.prototype.BuyOrSellOnClick=function(e){if(e){var t=e.children[2].getComponent(cc.Label),n=e.getComponent(_.default);if(n._bool_IsBuy)if(l.Global.GetInstance().SetGameGold(-n._num_Buy))if(this.SetGoldShow(),s.default.getInstance().NotificationTips("Successful purchase"),r.AudioManager.getInstance().playEffect("Ling"),this._arr_str_SellName.includes(n._str_Name)){l.Global.GetInstance().SetGoodsQuantity(n._str_Name,1);var o=this._dic_node_SellItem[n._str_Name],a=o.getComponent(_.default);a._num_Number=l.Global.GetInstance().GetGoodsQuantity(n._str_Name),o.children[2].getComponent(cc.Label).string=a._num_Number.toString()}else this.CreatorSellItem(n._str_Name,1),l.Global.GetInstance().SetGoodsQuantity(n._str_Name,1);else s.default.getInstance().NotificationTips("Lack of resources"),r.AudioManager.getInstance().playEffect("Warning");else r.AudioManager.getInstance().playEffect("Ling"),l.Global.GetInstance().SetGameGold(n._num_Sell),n._num_Number-=1,t.string=n._num_Number.toString(),l.Global.GetInstance().SetGoodsQuantity(n._str_Name,-1),n._num_Number<=0&&(this._node_BuyOrSellBtn.off(cc.Node.EventType.TOUCH_END),this.RemoveSellName(n._str_Name),this._dic_node_SellItem[n._str_Name]=null,e.destroy()),s.default.getInstance().NotificationTips("Successful sale"),this.SetGoldShow()}},t.prototype.SetSelectTips=function(e){void 0==this._node_SelectTips?(this._node_SelectTips=e,this._node_SelectTips.active=!0):(this._node_SelectTips.active=!1,this._node_SelectTips=e,this._node_SelectTips.active=!0)},t.prototype.SetGoldShow=function(){this._lab_GameGold.string=l.Global.GetInstance()._num_GameGold.toString()},t.prototype.AddBtnOnClick=function(e){switch(e.node.name){case"CloseBtn":s.default.getInstance().ClosePanel(this.node);break;case"SettingBtn":s.default.getInstance().ShowPanel("SettingPanel")}},t=a([d],t)}(i.Base_Panel));n.default=p,cc._RF.pop()},{"../GoodsItem":"GoodsItem","../manager/AudioManager":"AudioManager","../manager/Global":"Global","../manager/ResourceManager":"ResourceManager","../manager/UIManager":"UIManager","./Base_Panel":"Base_Panel"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"457bcVdfdZDobO4vXtPJhcs","UIManager");var o=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(a=e[s])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../panel/Base_Panel"),i=e("./ResourceManager"),r=e("./Global"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){this._dic_CachePanel={},this._arr_OpenPanel=[],this._any_EnterData=null,this._node_PanelParent=null,this._str_CurrentPaneName=void 0,this._ts_CurrentPanel=void 0,this._node_Notification=void 0,this._lab_Notification=void 0,this._bool_NotifictionIsComplete=!0,this._node_BlackEffect=void 0,this._bool_IsBlackRffect=!1,this._tween_opacityShow=cc.tween().to(.7,{opacity:255,easing:"sineOutIn"}),this._tween_opacityHide=cc.tween().to(.7,{opacity:0,easing:"sineOutIn"})}var t;return t=e,e.getInstance=function(){return t.instance},e.prototype.ShowPanel=function(e,t,n){var o=this;if(this._bool_IsBlackRffect=n,e!=this._str_CurrentPaneName){if(this._node_PanelParent||(this._node_PanelParent=cc.find("Canvas").getChildByName("UI_GameRoot").getChildByName("PanelParent")),this._any_EnterData=t,void 0==this._dic_CachePanel[e]){cc.log(this._node_PanelParent.name+"--------prefab/panelPre/"+e);var r=i.ResourceManager.getInstance().getRes("prefab/panelPre/"+e,cc.Prefab),s=cc.instantiate(r);s.setParent(this._node_PanelParent),s.addComponent(s.name),s.active=!1,this._ts_CurrentPanel=s.getComponent(a.Base_Panel),this._dic_CachePanel[e]=this._ts_CurrentPanel}else this._ts_CurrentPanel=this._dic_CachePanel[e];this._ts_CurrentPanel.node.setSiblingIndex(this._node_PanelParent.childrenCount-1),n?this.BlackAnimation(function(){o._ts_CurrentPanel.enum_PanelType==a.PanelType.Full&&(o.CloseAllPanel(),o._arr_OpenPanel.push(o._ts_CurrentPanel),o._ts_CurrentPanel.node.active=!0)},function(){o._ts_CurrentPanel.OnEnter(o._any_EnterData)}):(this._ts_CurrentPanel.enum_PanelType==a.PanelType.Full&&this.CloseAllPanel(),this._arr_OpenPanel.push(this._ts_CurrentPanel),this._ts_CurrentPanel.node.active=!0,this._ts_CurrentPanel.OnEnter(this._any_EnterData))}},e.prototype.loadingPanel=function(e,t){var n=this;if(1==t.isValid){if(void 0==this._dic_CachePanel[t.name]){var o=cc.instantiate(t);o.setParent(this._node_PanelParent),o.addComponent(o.name),o.active=!1;var i=o.getComponent(a.Base_Panel);this._dic_CachePanel[t.name]=i}if(this._dic_CachePanel[t.name].node.setSiblingIndex(this._node_PanelParent.childrenCount-1),this._bool_IsBlackRffect)this.BlackAnimation(function(){switch(n._dic_CachePanel[t.name].enum_PanelType){case a.PanelType.Full:n._str_CurrentPaneName=t.name;for(var e=0;e<n._arr_OpenPanel.length;e++)n._arr_OpenPanel[e].OnExit();n._arr_OpenPanel=[];break;case a.PanelType.Popup:}n._arr_OpenPanel.push(n._dic_CachePanel[t.name]),n._dic_CachePanel[t.name].node.active=!0},function(){n._dic_CachePanel[t.name].OnEnter(n._any_EnterData)});else{switch(this._dic_CachePanel[t.name].enum_PanelType){case a.PanelType.Full:this._str_CurrentPaneName=t.name;for(var r=0;r<this._arr_OpenPanel.length;r++)this._arr_OpenPanel[r].OnExit();this._arr_OpenPanel=[];break;case a.PanelType.Popup:}this._arr_OpenPanel.push(this._dic_CachePanel[t.name]),this._dic_CachePanel[t.name].node.active=!0,this._dic_CachePanel[t.name].OnEnter(this._any_EnterData)}}},e.prototype.BlackAnimation=function(e,t){var n=this;void 0==this._node_BlackEffect&&(this._node_BlackEffect=r.Global.GetInstance().FindNodeRecursively(cc.find("Canvas"),"BlackEffect")),this._node_BlackEffect.active=!0,this._node_BlackEffect.opacity=0,cc.tween(this._node_BlackEffect).then(this._tween_opacityShow).call(function(){e(),t()}).then(this._tween_opacityHide).call(function(){n._node_BlackEffect.active=!1}).start()},e.prototype.CloseAllPanel=function(){for(var e=0;e<this._arr_OpenPanel.length;e++)this._arr_OpenPanel[e].OnExit();this._arr_OpenPanel=[]},e.prototype.ClosePanel=function(e){var t=e.getComponent(a.Base_Panel);t?(this._arr_OpenPanel.splice(this._arr_OpenPanel.indexOf(t),1),t.OnExit()):cc.error("-------No Find Panel--------")},e.prototype.NotificationTips=function(e){var t=this;void 0==this._node_Notification&&(this._node_Notification=r.Global.GetInstance().FindNodeRecursively(cc.find("Canvas"),"Notification")),void 0==this._lab_Notification&&(this._lab_Notification=r.Global.GetInstance().FindNodeRecursively(this._node_Notification,"Notification_Label").getComponent(cc.Label)),this._node_Notification.stopAllActions(),this._lab_Notification.node.stopAllActions(),this._bool_NotifictionIsComplete=!1,this._lab_Notification.string=e,this._node_Notification.setScale(0),this._node_Notification.setPosition(cc.v2(0,-650)),this._node_Notification.opacity=0,this._lab_Notification.node.opacity=0,cc.tween(this._lab_Notification.node).to(1,{opacity:255,easing:"sineOutIn"}).start();var n=cc.tween;n(this._node_Notification).parallel(n().to(.3,{scale:1,easing:"sineOutIn"}),n().to(.3,{position:cc.v2(0,50),easing:"sineOutIn"}),n().to(1,{opacity:255})).delay(.5).call(function(){cc.tween(t._lab_Notification.node).to(.3,{opacity:0,easing:"sineOutIn"}).start(),n(t._node_Notification).parallel(n().to(.5,{scale:0,easing:"sineOutIn"}),n().to(.5,{position:cc.v2(0,650),easing:"sineOutIn"}).call(function(){}),n().to(.3,{opacity:0})).start()}).start()},e.instance=new t,e=t=o([c],e)}());n.default=l,cc._RF.pop()},{"../panel/Base_Panel":"Base_Panel","./Global":"Global","./ResourceManager":"ResourceManager"}]},{},["ClickTest","GameRoot","GoodsItem","ResourceLoading","AudioManager","BattleManager","EventManager","Global","ResourceManager","UIManager","GoodsData_Model","LevelData_Model","AboutPanel","Base_Panel","BattlePanel","EquipPanel","GameOverPanel","GuidePanel","LevelPanel","Panel","PausePanel","SelectPanel","SettingPanel","SkillPanel","StartPanel","StorePanel","Base_Role","HeroRole","MonsterRole"]);